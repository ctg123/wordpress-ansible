---

- name: Install WordPress with LAMP Stack.
  hosts: all
  remote_user: ansible
  become: true
  become_user: root
  gather_facts: true

  pre_tasks:
   - name: Update apt cache if needed.
     apt: update_cache=yes cache_valid_time=3600

  tasks:
   - name: Get software for apt repository management.
     apt:
       state: present
       name:
         - python3-apt
         - python3-pycurl

- name: Include Apache
  import_playbook: apache.yml

- name: Include PHP
  import_playbook: php.yml

- name: Include MySQL
  import_playbook: mysql.yml

- name: Include WordPress
  import_playbook: wordpress.yml
